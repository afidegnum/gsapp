#: import FadeTransition kivy.uix.screenmanager.FadeTransition
#: import Image kivy.uix.image.Image
#: import la kivy.adapters.listadapter
#: import factory kivy.factory
#: import CheckBox kivy.uix.checkbox
#:import ListItemButton kivy.uix.listview.ListItemButton
#:import ListAdapter kivy.adapters.listadapter.ListAdapter
#:import factory kivy.factory




MyScreenManager:
    IntroScreen:
    ProjectScreen:
    ProjectEditScreen:
    ProjectActivityScreen:
        id: project_acts
    ActivityScreen:
    MessageScreen:
    ProfileScreen

<ProjectPops>:
    size_hint: .2, .2
    canvas.before:
        Color:
            rgb: 0.2,0.3,1,1

<PaintWindow>:
    orientation: 'vertical'

<MenuPopup>:
    id: mypop
    size_hint: .8, .2

    auto_dismiss: False
    BoxLayout:
        orientation: 'horizontal'

        Button:

            size: 500, 500
            text: "Update"
            on_release: app.root.current = 'projectsactiv'
            on_release: root.dismiss()


        Button:
            size: 500, 500
            text: "Edit Project"
            on_release: app.root.current = 'updateproject'
            on_release: root.dismiss()


        Button:
            size: 500, 500
            text: "CloseWindows"
            on_press: root.dismiss()



<IntroScreen>:
    name: 'main'
    canvas.before:
        Color:
            rgb: 0.2,0.3,1,1
        Rectangle:
            pos: self.pos
            size: self.size
    BoxLayout:
        anchor_x: 'center'
        anchor_y: 'center'
        padding: 100, 100

        Button:
            id: 'introButton'
            on_release: app.root.current = 'main'
            background_color: 0,0,0,0
            Image:
                source: 'home.png'
                center_x: self.parent.center_x
                center_y: self.parent.center_y

        Button:
            id: 'projectsButton'
            on_release: app.root.current = 'projects'
            background_color: 0,0,0,0
            Image:
                source: 'projects.png'
                center_x: self.parent.center_x
                center_y: self.parent.center_y

        Button:
            id: 'activityButton'
            on_release: app.root.current = 'activity'
            background_color: 0,0,0,0
            Image:
                source: 'activities.png'
                center_x: self.parent.center_x
                center_y: self.parent.center_y

        Button:
            id: 'msgButton'
            on_release: app.root.current = 'messages'
            background_color: 0,0,0,0
            Image:
                source: 'messages.png'
                center_x: self.parent.center_x
                center_y: self.parent.center_y

        Button:
            id: 'profileButton'
            on_release: app.root.current = 'profile'
            background_color: 0,0,0,0
            Image:
                source: 'myprofile.png'
                center_x: self.parent.center_x
                center_y: self.parent.center_y


<MenuButton>:
    id: menubutt
    size_hint_y: None
    height: dp(44)
    on_release: self.open_popmenu(self.text)


<EditButton>:
    id: editbutt
    size_hint_y: None
    height: dp(44)
    Label:
        text: str(app.questions['name'])
    CheckBox:
        on_active: root.ans_state()







<StageButton>:
    id: stagebutt
    size_hint_y: None
    height: dp(44)
    on_release: self.open_popmenu(self.text)



<ProjectScreen>:
    name: 'projects'
    ListView:
        id: my_projects
        adapter:
            ListAdapter(data=app.projects,
            cls=factory.Factory.MenuButton)





    AnchorLayout:
        anchor_x: 'center'
        anchor_y: 'bottom'
        BoxLayout:
            padding: 50, 50
            size_hint_x: .8
            size_hint_y: .3
            Button:
                id: 'introButton'
                on_release: app.root.current = 'main'
                background_color: 0,0,0,0
                Image:
                    source: 'home.png'
                    center_x: self.parent.center_x
                    center_y: self.parent.center_y
                    size: 70, 70


            Button:
                id: 'projectsButton'
                on_release: app.root.current = 'projects'
                background_color: 0,0,0,0
                Image:
                    source: 'projects.png'
                    center_x: self.parent.center_x
                    center_y: self.parent.center_y
                    size: 70, 70

            Button:
                id: 'update_project'
                on_release: app.root.current = 'updateproject'
                background_color: 0,0,0,0
                Image:
                    source: 'projects.png'
                    center_x: self.parent.center_x
                    center_y: self.parent.center_y
                    size: 70, 70

            Button:
                id: 'project_activities'
                on_release: app.root.current = 'projectsactiv'
                background_color: 0,0,0,0
                Image:
                    source: 'projects.png'
                    center_x: self.parent.center_x
                    center_y: self.parent.center_y
                    size: 70, 70

            Button:
                id: 'activityButton'
                on_release: app.root.current = 'activity'
                background_color: 0,0,0,0
                Image:
                    source: 'activities.png'
                    center_x: self.parent.center_x
                    center_y: self.parent.center_y
                    size: 70, 70

            Button:
                id: 'msgButton'
                on_release: app.root.current = 'messages'
                background_color: 0,0,0,0
                Image:
                    source: 'messages.png'
                    center_x: self.parent.center_x
                    center_y: self.parent.center_y
                    size: 70, 70

            Button:
                id: 'profileButton'
                on_release: app.root.current = 'profile'
                background_color: 0,0,0,0
                Image:
                    source: 'myprofile.png'
                    center_x: self.parent.center_x
                    center_y: self.parent.center_y
                    size: 70, 70



#
#<StageBox>:
#    BoxLayout:
#        BoxLayout:
#            size_hint:(.1, None)
#        ListView:
#            size_hint: .8,.9
#            adapter:
#                la.ListAdapter(
#                data=app.stage_list,
#                cls=factory.Factory.MenuButton,
#                selection_mode='single',
#                allow_empty_selection=True)
                #args_converter=root.args_converter)


#<UpdateProject>:
#    BoxLayout:
#        BoxLayout:
#            size_hint:(.1, None)
#        ListView:
#            size_hint: .8,.9
#            adapter:
#                la.ListAdapter(
#                data=app.additional_details,
#                cls=factory.Factory.MenuButton,
#                selection_mode='single',
#                allow_empty_selection=True)
#                #args_converter=root.args_converter)
#
#<EntryBox>:
#    BoxLayout:
#        size_hint:(.1, None)
#        Label:
#            text: "Add Activity Details"
#        TextInput:
#            id: activity_title
#        TextInput:
#            id: activity_description
#            multiline: True
#            Button:
#                id: close_window
#                text: 'X'


#<CameraBox>:
#    AnchorLayout:
#        anchor_x: 'center'
#        anchor_y: 'bottom'
#
#        BoxLayout:
#            id: camera
#            play: True
#        ToggleButton:
#            on_press: camera.play = True
#            size_hint_y: None
#            height: '48dp'
#        Button:
#            id: close_window
#            text: 'X'

<ProjectActivityScreen>:
    name: 'projectsactiv'
    id: projname
    BoxLayout:
        orientation: 'vertical'

        BoxLayout:
            orientation: 'horizontal'
            size_hint: None, None
            size: 70, 100
            Label:
                padding: 20, 20
                text: root.projname

        BoxLayout:
            orientation: 'vertical'
            size_hint: None, None
            size: 200, 150
            GridLayout:

                cols: 2
                Label:
                    text: "Stage Description:"
                TextInput:
                    size_hint: None, None
                    height: sp(70)
                    width: sp(300)
                    id: age_input

                    multiline: True

        BoxLayout:
            orientation: 'vertical'
            size_hint: None, None
            size: 100, 100
            AnchorLayout:
                anchor_x: 'center'
                anchor_y: 'bottom'

                BoxLayout:
                    id: camera
                    play: True
                    ToggleButton:
                        on_press: camera.play = True
                        size_hint_y: None
                        height: '48dp'
                    Button:
                        id: close_window
                        text: 'X'


#    BoxLayout:
#        FileChooserListView:
#            id: filechooser
#            on_selection: pass#do sth.



#    GridLayout:
#
#        cols: 2
#        Label:
#            text: "Patient's Age:"
#        TextInput:
#            id: age_input
#
#            multiline: True

<ActivityScreen>:
    name: 'activity'


    GridLayout:

        cols: 2
        Label:
            text: "Patient's Age:"
        TextInput:
            id: age_input

            multiline: True

    AnchorLayout:
        anchor_x: 'center'
        anchor_y: 'bottom'

        BoxLayout:
            id: camera
            play: True
            ToggleButton:
                on_press: camera.play = True
                size_hint_y: None
                height: '48dp'
            Button:
                id: close_window
                text: 'X'


    BoxLayout:
        FileChooserListView:
            id: filechooser
            on_selection: pass#do sth.






<FixLabel@Label>:
#    text: 'Hello World!'
    size_hint: (1, None)
    height: dp(30)

#<ProjectEditScreen>:
#    name: 'updateproject'
#    ScrollView:
#        do_scroll_x: False
#        scroll_timeout: 200
#        scroll_distance: 20
#        size_hint_x: .8
#        size_hint_y: .3
#        GridLayout:
#            canvas.before:
#                Color:
#                    rgb: 0.4,0.4,0.4,1
#                Rectangle:
#                    pos: self.pos
#                    size: self.size
#            #orientation: 'vertical'
#            cols: 1
#            padding: 50, 50
#            size_hint: (1, None)
#            height: self.minimum_height
#            FixLabel
#            FixLabel
#            FixLabel
#            FixLabel
#            FixLabel
#            FixLabel
#            FixLabel
#            FixLabel
#            FixLabel
#            FixLabel


#<ProjectEditScreen>:
#    name: 'updateproject'
#    ListView:
#        id: my_questions
#        adapter:
#            ListAdapter(data=app.questions,
#            cls=factory.Factory.EditButton)


<ProjectEditScreen>:
    name: 'updateproject'
    ListView:
        id: my_questions
        adapter:
            ListAdapter(data=app.questions,
            cls=factory.Factory.EditButton)



<LocalEvents>:
    BoxLayout:
        size_hint:(.1, None)
        Label:
            text: "Local Events"
        TextInput:
            id: event_title
        TextInput:
            id: event_description
            multiline: True
        Button:
            id: save_event
        Button:
            id: close_window
            text: 'X'

#
#<ActivityScreen>:
#    name: 'activity'
#    AnchorLayout:
#        anchor_x: 'center'
#        anchor_y: 'bottom'
#        BoxLayout:
#            padding: 50, 50
#            size_hint_x: .8
#            size_hint_y: .3
#            Button:
#                id: 'introButton'
#                on_release: app.root.current = 'main'
#                background_color: 0,0,0,0
#                Image:
#                    source: 'home.png'
#                    center_x: self.parent.center_x
#                    center_y: self.parent.center_y
#                    size: 70, 70
#
#            Button:
#                id: 'projectsButton'
#                on_release: app.root.current = 'projects'
#                background_color: 0,0,0,0
#                Image:
#                    source: 'projects.png'
#                    center_x: self.parent.center_x
#                    center_y: self.parent.center_y
#                    size: 70, 70
#
#            Button:
#                id: 'activityButton'
#                on_release: app.root.current = 'activity'
#                background_color: 0,0,0,0
#                Image:
#                    source: 'activities.png'
#                    center_x: self.parent.center_x
#                    center_y: self.parent.center_y
#                    size: 70, 70
#
#            Button:
#                id: 'msgButton'
#                on_release: app.root.current = 'messages'
#                background_color: 0,0,0,0
#                Image:
#                    source: 'messages.png'
#                    center_x: self.parent.center_x
#                    center_y: self.parent.center_y
#                    size: 70, 70
#
#            Button:
#                id: 'profileButton'
#                on_release: app.root.current = 'profile'
#                background_color: 0,0,0,0
#                Image:
#                    source: 'myprofile.png'
#                    center_x: self.parent.center_x
#                    center_y: self.parent.center_y
#                    size: 70, 70



<MessageScreen>:
    name: 'messages'
    AnchorLayout:
        anchor_x: 'center'
        anchor_y: 'bottom'
        BoxLayout:
            padding: 50, 50
            size_hint_x: .8
            size_hint_y: .3
            Button:
                id: 'introButton'
                on_release: app.root.current = 'main'
                background_color: 0,0,0,0
                Label:
                    text: "Messages"
                Image:
                    source: 'home.png'
                    center_x: self.parent.center_x
                    center_y: self.parent.center_y
                    size: 70, 70
                    Label:
                        text: " mesages"

            Button:
                id: 'projectsButton'
                on_release: app.root.current = 'projects'
                background_color: 0,0,0,0
                Image:
                    source: 'projects.png'
                    center_x: self.parent.center_x
                    center_y: self.parent.center_y
                    size: 70, 70

            Button:
                id: 'activityButton'
                on_release: app.root.current = 'activity'
                background_color: 0,0,0,0
                Image:
                    source: 'activities.png'
                    center_x: self.parent.center_x
                    center_y: self.parent.center_y
                    size: 70, 70

            Button:
                id: 'msgButton'
                on_release: app.root.current = 'messages'
                background_color: 0,0,0,0
                Image:
                    source: 'messages.png'
                    center_x: self.parent.center_x
                    center_y: self.parent.center_y
                    size: 70, 70

            Button:
                id: 'profileButton'
                on_release: app.root.current = 'profile'
                background_color: 0,0,0,0
                Image:
                    source: 'myprofile.png'
                    center_x: self.parent.center_x
                    center_y: self.parent.center_y
                    size: 70, 70



<ProfileScreen>:
    name: 'profile'
    AnchorLayout:
        anchor_x: 'center'
        anchor_y: 'bottom'
        BoxLayout:
            padding: 50, 50
            size_hint_x: .8
            size_hint_y: .3
            Button:
                id: 'introButton'
                on_release: app.root.current = 'main'
                background_color: 0,0,0,0
                Image:
                    source: 'home.png'
                    center_x: self.parent.center_x
                    center_y: self.parent.center_y
                    size: 70, 70

            Button:
                id: 'projectsButton'
                on_release: app.root.current = 'projects'
                background_color: 0,0,0,0
                Image:
                    source: 'projects.png'
                    center_x: self.parent.center_x
                    center_y: self.parent.center_y
                    size: 70, 70

            Button:
                id: 'activityButton'
                on_release: app.root.current = 'activity'
                background_color: 0,0,0,0
                Image:
                    source: 'activities.png'
                    center_x: self.parent.center_x
                    center_y: self.parent.center_y
                    size: 70, 70

            Button:
                id: 'msgButton'
                on_release: app.root.current = 'messages'
                background_color: 0,0,0,0
                Image:
                    source: 'messages.png'
                    center_x: self.parent.center_x
                    center_y: self.parent.center_y
                    size: 70, 70

            Button:
                id: 'profileButton'
                on_release: app.root.current = 'profile'
                background_color: 0,0,0,0
                Image:
                    source: 'myprofile.png'
                    center_x: self.parent.center_x
                    center_y: self.parent.center_y
                    size: 70, 70



